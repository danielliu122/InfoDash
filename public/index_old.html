<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Primary Meta Tags -->
    <title>InfoDash - Real-Time Stock Market Data & Daily News Dashboard</title>
    <meta name="title" content="InfoDash - Real-Time Stock Market Data & Daily News Dashboard">
    <meta name="description" content="Track real-time stock market data, cryptocurrency prices, and get daily news updates with AI-powered summaries. Your all-in-one financial dashboard for market trends, weather, and traffic updates.">
    <meta name="keywords" content="real-time stock market, cryptocurrency prices, daily news, financial dashboard, market trends, AI summaries, weather updates, traffic conditions">
    <meta name="author" content="InfoDash">
    <meta name="robots" content="index, follow, max-image-preview:large">
    <meta name="language" content="English, EspaÃ±ol">
    <meta name="revisit-after" content="1 day">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://infodash.app/">
    <meta property="og:title" content="InfoDash - Real-Time Stock Market Data & Daily News Dashboard">
    <meta property="og:description" content="Track real-time stock market data, cryptocurrency prices, and get daily news updates with AI-powered summaries. Your all-in-one financial dashboard.">
    <meta property="og:image" content="https://infodash.app/static/og-image.jpg">
    <meta property="og:site_name" content="InfoDash">
    <meta property="og:locale" content="en_US">
    
    <!-- Additional SEO Meta Tags -->
    <meta name="theme-color" content="#2196F3">
    <meta name="msapplication-TileColor" content="#2196F3">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="InfoDash">
    <meta name="application-name" content="InfoDash">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://infodash.app/">
    
    <!-- Favicon and App Icons -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="static/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="static/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="static/favicon-16x16.png">
    <link rel="manifest" href="static/site.webmanifest">
    
    <!-- Preconnect to external domains for performance -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    
    <!-- Fonts and Stylesheets -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Text:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/sidebar.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet">
    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <script src="https://cdn.jsdelivr.net/npm/yahoo-finance2@2.0.0/dist/yahooFinance.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
    
    <!-- Application Scripts -->
    <script src="js/sidebar.js"></script>
    <script type="module" src="js/userPreferences.js"></script>
    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/chat.js"></script>
    <script type="module" src="js/finance.js"></script>
    <script type="module" src="js/news.js"></script>
    <script type="module" src="js/trends.js"></script>
    <script type="module" src="js/reddit.js"></script>
    <script type="module" src="js/summary.js"></script>
    
    <!-- Google AdSense -->
    <meta name="google-adsense-account" content="ca-pub-4393237786045277">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4393237786045277" crossorigin="anonymous"></script>
    <script async custom-element="amp-auto-ads" src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js"></script>
    
    <!-- Enhanced JSON-LD Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "InfoDash",
        "description": "Track real-time stock market data, cryptocurrency prices, and get daily news updates with AI-powered summaries. Your all-in-one financial dashboard.",
        "url": "https://infodash.app/",
        "applicationCategory": ["FinanceApplication", "NewsApplication"],
        "operatingSystem": "Web Browser",
        "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": "4.8",
            "reviewCount": "150"
        },
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "featureList": [
            "Real-time stock market data",
            "Cryptocurrency price tracking",
            "Daily news updates",
            "AI-powered summaries",
            "Interactive financial charts",
            "Customizable watchlists",
            "Weather updates",
            "Traffic conditions"
        ],
        "author": {
            "@type": "Organization",
            "name": "InfoDash",
            "logo": "https://infodash.app/static/logo.png"
        },
        "publisher": {
            "@type": "Organization",
            "name": "InfoDash",
            "logo": "https://infodash.app/static/logo.png"
        }
    }
    </script>
    
    <!-- Additional Structured Data for News -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "NewsMediaOrganization",
        "name": "InfoDash",
        "url": "https://infodash.app/",
        "logo": "https://infodash.app/static/logo.png",
        "sameAs": [
            "https://twitter.com/infodash",
            "https://facebook.com/infodash"
        ]
    }
    </script>
</head>
<body class="dark-theme">
    <amp-auto-ads type="adsense"
        data-ad-client="ca-pub-4393237786045277">
    </amp-auto-ads>
    <header class="container">
        <div style="display: flex; align-items: center; justify-content: space-between;">
            <h4 class="center-align" style="margin: 0;">Info Dash</h4>
            
            <!-- Weather Display -->
            <div id="header-weather" class="weather-display" style="display: flex; align-items: center; gap: 8px; padding: 8px 12px; background: var(--card-bg); border-radius: 6px; border: 1px solid var(--border-color); min-width: 120px; justify-content: center;" onclick="handleWeatherClick()" title="Click to change location">
                <span id="weather-icon" style="font-size: 1.2em;">ğŸŒ¤ï¸</span>
                <div style="display: flex; flex-direction: column; align-items: center; line-height: 1.2;">
                    <span id="weather-temp" style="font-weight: 600; font-size: 0.9em;">--Â°F</span>
                    <span id="weather-location" style="font-size: 0.7em; color: var(--text-secondary);">Loading...</span>
                </div>
            </div>
            
            <div style="display: flex; align-items: center; gap: 15px;">
                <div class="input-field" style="margin: 0; min-width: 250px;">
                    <select id="regionSelect" onchange="handleRegionChange()">
                        <option value="en-US" data-language="en" data-country="US">ğŸ‡ºğŸ‡¸ United States (English)</option>
                        <option value="en-GB" data-language="en" data-country="GB">ğŸ‡¬ğŸ‡§ United Kingdom (English)</option>
                        <option value="en-CA" data-language="en" data-country="CA">ğŸ‡¨ğŸ‡¦ Canada (English)</option>
                        <option value="en-AU" data-language="en" data-country="AU">ğŸ‡¦ğŸ‡º Australia (English)</option>
                        <option value="es-ES" data-language="es" data-country="ES">ğŸ‡ªğŸ‡¸ EspaÃ±a (EspaÃ±ol)</option>
                        <option value="es-MX" data-language="es" data-country="MX">ğŸ‡²ğŸ‡½ MÃ©xico (EspaÃ±ol)</option>
                        <option value="fr-FR" data-language="fr" data-country="FR">ğŸ‡«ğŸ‡· France (FranÃ§ais)</option>
                        <option value="de-DE" data-language="de" data-country="DE">ğŸ‡©ğŸ‡ª Deutschland (Deutsch)</option>
                        <option value="pt-BR" data-language="pt" data-country="BR">ğŸ‡§ğŸ‡· Brasil (PortuguÃªs)</option>
                        <option value="it-IT" data-language="it" data-country="IT">ğŸ‡®ğŸ‡¹ Italia (Italiano)</option>
                        <option value="ru-RU" data-language="ru" data-country="RU">ğŸ‡·ğŸ‡º Ğ Ğ¾ÑÑĞ¸Ñ (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</option>
                        <option value="jp-JP" data-language="jp" data-country="JP">ğŸ‡¯ğŸ‡µ æ—¥æœ¬ (æ—¥æœ¬èª)</option>
                        <option value="ko-KR" data-language="ko" data-country="KR">ğŸ‡°ğŸ‡· í•œêµ­ (í•œêµ­ì–´)</option>
                        <option value="zh-CN" data-language="zh" data-country="CN">ğŸ‡¨ğŸ‡³ ä¸­å›½ (ä¸­æ–‡)</option>
                        <option value="ar-SA" data-language="ar" data-country="SA">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
                        <option value="hi-IN" data-language="hi" data-country="IN">ğŸ‡®ğŸ‡³ à¤­à¤¾à¤°à¤¤ (à¤¹à¤¿à¤¨à¥à¤¦à¥€)</option>
                        <option value="vi-VN" data-language="vi" data-country="VN">ğŸ‡»ğŸ‡³ Viá»‡t Nam (Tiáº¿ng Viá»‡t)</option>
                        <option value="th-TH" data-language="th" data-country="TH">ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢ (à¹„à¸—à¸¢)</option>
                        <option value="id-ID" data-language="id" data-country="ID">ğŸ‡®ğŸ‡© Indonesia (Bahasa Indonesia)</option>
                        <option value="tr-TR" data-language="tr" data-country="TR">ğŸ‡¹ğŸ‡· TÃ¼rkiye (TÃ¼rkÃ§e)</option>
                        <option value="pl-PL" data-language="pl" data-country="PL">ğŸ‡µğŸ‡± Polska (Polski)</option>
                        <option value="nl-NL" data-language="nl" data-country="NL">ğŸ‡³ğŸ‡± Nederland (Nederlands)</option>
                        <option value="sv-SE" data-language="sv" data-country="SE">ğŸ‡¸ğŸ‡ª Sverige (Svenska)</option>
                        <option value="no-NO" data-language="no" data-country="NO">ğŸ‡³ğŸ‡´ Norge (Norsk)</option>
                        <option value="fi-FI" data-language="fi" data-country="FI">ğŸ‡«ğŸ‡® Suomi (Suomi)</option>
                        <option value="da-DK" data-language="da" data-country="DK">ğŸ‡©ğŸ‡° Danmark (Dansk)</option>
                        <option value="cs-CZ" data-language="cs" data-country="CZ">ğŸ‡¨ğŸ‡¿ ÄŒesko (ÄŒeÅ¡tina)</option>
                        <option value="hu-HU" data-language="hu" data-country="HU">ğŸ‡­ğŸ‡º MagyarorszÃ¡g (Magyar)</option>
                        <option value="el-GR" data-language="el" data-country="GR">ğŸ‡¬ğŸ‡· Î•Î»Î»Î¬Î´Î± (Î•Î»Î»Î·Î½Î¹ÎºÎ¬)</option>
                        <option value="ro-RO" data-language="ro" data-country="RO">ğŸ‡·ğŸ‡´ RomÃ¢nia (RomÃ¢nÄƒ)</option>
                        <option value="uk-UA" data-language="uk" data-country="UA">ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ° (Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°)</option>
                        <option value="he-IL" data-language="he" data-country="IL">ğŸ‡®ğŸ‡± ×™×©×¨××œ (×¢×‘×¨×™×ª)</option>
                        <option value="fa-IR" data-language="fa" data-country="IR">ğŸ‡®ğŸ‡· Ø§ÛŒØ±Ø§Ù† (ÙØ§Ø±Ø³ÛŒ)</option>
                        <option value="bn-BD" data-language="bn" data-country="BD">ğŸ‡§ğŸ‡© à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶ (à¦¬à¦¾à¦‚à¦²à¦¾)</option>
                        <option value="ml-IN" data-language="ml" data-country="IN">ğŸ‡®ğŸ‡³ à´•àµ‡à´°à´³à´‚ (à´®à´²à´¯à´¾à´³à´‚)</option>
                        <option value="ne-NP" data-language="ne" data-country="NP">ğŸ‡³ğŸ‡µ à¤¨à¥‡à¤ªà¤¾à¤² (à¤¨à¥‡à¤ªà¤¾à¤²à¥€)</option>
                        <option value="az-AZ" data-language="az" data-country="AZ">ğŸ‡¦ğŸ‡¿ AzÉ™rbaycan (AzÉ™rbaycan dili)</option>
                        <option value="ka-GE" data-language="ka" data-country="GE">ğŸ‡¬ğŸ‡ª áƒ¡áƒáƒ¥áƒáƒ áƒ—áƒ•áƒ”áƒšáƒ (áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜)</option>
                        <option value="sr-RS" data-language="sr" data-country="RS">ğŸ‡·ğŸ‡¸ Ğ¡Ñ€Ğ±Ğ¸Ñ˜Ğ° (Ğ¡Ñ€Ğ¿ÑĞºĞ¸)</option>
                        <option value="mk-MK" data-language="mk" data-country="MK">ğŸ‡²ğŸ‡° ĞœĞ°ĞºĞµĞ´Ğ¾Ğ½Ğ¸Ñ˜Ğ° (ĞœĞ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸)</option>
                        <option value="sl-SI" data-language="sl" data-country="SI">ğŸ‡¸ğŸ‡® Slovenija (SlovenÅ¡Äina)</option>
                        <option value="sk-SK" data-language="sk" data-country="SK">ğŸ‡¸ğŸ‡° Slovensko (SlovenÄina)</option>
                        <option value="et-EE" data-language="et" data-country="EE">ğŸ‡ªğŸ‡ª Eesti (Eesti)</option>
                        <option value="is-IS" data-language="is" data-country="IS">ğŸ‡®ğŸ‡¸ Ãsland (Ãslenska)</option>
                    </select>
                </div>
                <button class="theme-toggle" id="themeToggle">ğŸŒ“</button>
            </div>
        </div>
    </header>
    
    <main class="container">
        <!-- Unified Summary Section -->
        <div class="row">
            <div class="col s12">
                <section id="summary-section" class="section">
                    <div class="section-header">
                        <h4>ğŸ“ŠSummary Date: <span id="titleDate"></span></h4>
                        <div class="right">
                            <div class="section-controls">
                                <button id="summary-refresh-btn" class="btn-small waves-effect waves-light" onclick="refreshSummary()">ğŸ”„ Refresh</button>
                            </div>
                        </div>
                        <div class="section-toggle" onclick="toggleSection('summary-content-container')" title="Show/Hide Section">
                            <span class="toggle-icon">âˆ’</span>
                        </div>
                    </div>

                    <!-- Location Modal -->
                    <div id="locationModal" class="modal">
                        <div class="modal-content">
                            <h4>Set Weather Location</h4>
                            <p>Enter your location for weather information in the summary:</p>
                            <div class="input-field">
                                <input type="text" id="weatherLocationInput" placeholder="e.g., New York, NY or 10001">
                                <label for="weatherLocationInput">Location (City, State or ZIP)</label>
                            </div>
                            <p class="small-text">Examples: "San Francisco, CA", "New York, NY", "90210", "London, UK"</p>
                        </div>
                        <div class="modal-footer">
                            <button class="modal-close waves-effect waves-light btn" onclick="setWeatherLocation()">Set Location</button>
                            <button class="modal-close waves-effect waves-light btn-flat" onclick="closeLocationModal()">Cancel</button>
                        </div>
                    </div>

                    <div id="summary-content-container" class="section-content">
                        <!-- Summary Display -->
                        <div class="summary-loading">
                            <div class="progress">
                                <div class="indeterminate"></div>
                            </div>
                            <p class="center-align" id="summary-loading-text">Loading today's summary...</p>
                        </div>
                        <div class="summary-content" style="display: none;">
                            <!-- Summary cards will be here -->
                            <div class="row">
                                <div class="col s12 m4">
                                    <div class="summary-card news-summary">
                                        <h5>ğŸ“° Top Headlines</h5>
                                        <div class="summary-text"></div>
                                    </div>
                                </div>
                                <div class="col s12 m4">
                                    <div class="summary-card trends-summary">
                                        <h5>ğŸ”¥ Trending Topics</h5>
                                        <div class="summary-text"></div>
                                    </div>
                                </div>
                                <div class="col s12 m4">
                                    <div class="summary-card finance-summary">
                                        <h5>ğŸ“ˆ Market Overview</h5>
                                        <div class="summary-text"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12 m6">
                                    <div class="summary-card weather-summary">
                                        <h5>ğŸŒ¤ï¸ Weather Update
                                            <button onclick="showLocationModal()" class="btn-small waves-effect waves-light" style="margin-left: 10px; font-size: 0.8em;">ğŸ“ Set Location</button>
                                            <button onclick="updateHeaderWeather(); updateSummaryWeather();" class="btn-small waves-effect waves-light" style="margin-left: 10px; font-size: 0.8em;">ğŸ”„ Update Weather</button>
                                        </h5>
                                        <div class="weather-info">
                                            <div class="weather-location"></div>
                                            <div class="weather-updated"></div>
                                            <p class="weather-condition"></p>
                                            <p class="weather-temp"></p>
                                            <p class="weather-feelslike"></p>
                                            <p class="weather-humidity"></p>
                                            <p class="weather-wind"></p>
                                        </div>
                                    </div>
                                </div>
                                <div class="col s12 m6">
                                    <div class="summary-card overall-summary">
                                        <h5>ğŸ¯ Key Insights</h5>
                                        <div class="summary-text"></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Archive List (Collapsible) -->
                        <div class="row archive-row">
                            <div class="col s12">
                                <ul class="collapsible">
                                    <li>
                                        <div class="collapsible-header"><i class="material-icons">archive</i>Summary Archive</div>
                                        <div class="collapsible-body">
                                            <div class="row">
                                                <div class="input-field col s12 m4">
                                                    <input type="date" id="summaryDate" onchange="loadSummaryForDate()">
                                                    <label for="summaryDate" class="active">Select Date</label>
                                                </div>
                                                <div class="input-field col s12 m4">
                                                    <select id="summaryRegionSelect" onchange="loadSummaryForDate()">
                                                        <option value="en-US" data-language="en" data-country="US">ğŸ‡ºğŸ‡¸ United States (English)</option>
                                                        <option value="en-GB" data-language="en" data-country="GB">ğŸ‡¬ğŸ‡§ United Kingdom (English)</option>
                                                        <option value="en-CA" data-language="en" data-country="CA">ğŸ‡¨ğŸ‡¦ Canada (English)</option>
                                                        <option value="en-AU" data-language="en" data-country="AU">ğŸ‡¦ğŸ‡º Australia (English)</option>
                                                        <option value="es-ES" data-language="es" data-country="ES">ğŸ‡ªğŸ‡¸ EspaÃ±a (EspaÃ±ol)</option>
                                                        <option value="es-MX" data-language="es" data-country="MX">ğŸ‡²ğŸ‡½ MÃ©xico (EspaÃ±ol)</option>
                                                        <option value="fr-FR" data-language="fr" data-country="FR">ğŸ‡«ğŸ‡· France (FranÃ§ais)</option>
                                                        <option value="de-DE" data-language="de" data-country="DE">ğŸ‡©ğŸ‡ª Deutschland (Deutsch)</option>
                                                        <option value="pt-BR" data-language="pt" data-country="BR">ğŸ‡§ğŸ‡· Brasil (PortuguÃªs)</option>
                                                        <option value="it-IT" data-language="it" data-country="IT">ğŸ‡®ğŸ‡¹ Italia (Italiano)</option>
                                                        <option value="ru-RU" data-language="ru" data-country="RU">ğŸ‡·ğŸ‡º Ğ Ğ¾ÑÑĞ¸Ñ (Ğ ÑƒÑÑĞºĞ¸Ğ¹)</option>
                                                        <option value="jp-JP" data-language="jp" data-country="JP">ğŸ‡¯ï¿½ï¿½ æ—¥æœ¬ (æ—¥æœ¬èª)</option>
                                                        <option value="ko-KR" data-language="ko" data-country="KR">ğŸ‡°ğŸ‡· í•œêµ­ (í•œêµ­ì–´)</option>
                                                        <option value="zh-CN" data-language="zh" data-country="CN">ğŸ‡¨ğŸ‡³ ä¸­å›½ (ä¸­æ–‡)</option>
                                                        <option value="ar-SA" data-language="ar" data-country="SA">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ© (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)</option>
                                                        <option value="hi-IN" data-language="hi" data-country="IN">ğŸ‡®ğŸ‡³ à¤­à¤¾à¤°à¤¤ (à¤¹à¤¿à¤¨à¥à¤¦à¥€)</option>
                                                        <option value="vi-VN" data-language="vi" data-country="VN">ğŸ‡»ğŸ‡³ Viá»‡t Nam (Tiáº¿ng Viá»‡t)</option>
                                                        <option value="th-TH" data-language="th" data-country="TH">ğŸ‡¹ğŸ‡­ à¹„à¸—à¸¢ (à¹„à¸—à¸¢)</option>
                                                        <option value="id-ID" data-language="id" data-country="ID">ğŸ‡®ğŸ‡© Indonesia (Bahasa Indonesia)</option>
                                                        <option value="tr-TR" data-language="tr" data-country="TR">ğŸ‡¹ğŸ‡· TÃ¼rkiye (TÃ¼rkÃ§e)</option>
                                                        <option value="pl-PL" data-language="pl" data-country="PL">ğŸ‡µğŸ‡± Polska (Polski)</option>
                                                        <option value="nl-NL" data-language="nl" data-country="NL">ğŸ‡³ğŸ‡± Nederland (Nederlands)</option>
                                                        <option value="sv-SE" data-language="sv" data-country="SE">ğŸ‡¸ğŸ‡ª Sverige (Svenska)</option>
                                                        <option value="no-NO" data-language="no" data-country="NO">ğŸ‡³ğŸ‡´ Norge (Norsk)</option>
                                                        <option value="fi-FI" data-language="fi" data-country="FI">ğŸ‡«ğŸ‡® Suomi (Suomi)</option>
                                                        <option value="da-DK" data-language="da" data-country="DK">ğŸ‡©ğŸ‡° Danmark (Dansk)</option>
                                                        <option value="cs-CZ" data-language="cs" data-country="CZ">ğŸ‡¨ğŸ‡¿ ÄŒesko (ÄŒeÅ¡tina)</option>
                                                        <option value="hu-HU" data-language="hu" data-country="HU">ğŸ‡­ğŸ‡º MagyarorszÃ¡g (Magyar)</option>
                                                        <option value="el-GR" data-language="el" data-country="GR">ğŸ‡¬ğŸ‡· Î•Î»Î»Î¬Î´Î± (Î•Î»Î»Î·Î½Î¹ÎºÎ¬)</option>
                                                        <option value="ro-RO" data-language="ro" data-country="RO">ğŸ‡·ğŸ‡´ RomÃ¢nia (RomÃ¢nÄƒ)</option>
                                                        <option value="uk-UA" data-language="uk" data-country="UA">ğŸ‡ºğŸ‡¦ Ğ£ĞºÑ€Ğ°Ñ—Ğ½Ğ° (Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°)</option>
                                                        <option value="he-IL" data-language="he" data-country="IL">ğŸ‡®ğŸ‡± ×™×©×¨××œ (×¢×‘×¨×™×ª)</option>
                                                        <option value="fa-IR" data-language="fa" data-country="IR">ğŸ‡®ğŸ‡· Ø§ÛŒØ±Ø§Ù† (ÙØ§Ø±Ø³ÛŒ)</option>
                                                        <option value="bn-BD" data-language="bn" data-country="BD">ğŸ‡§ğŸ‡© à¦¬à¦¾à¦‚à¦²à¦¾à¦¦à§‡à¦¶ (à¦¬à¦¾à¦‚à¦²à¦¾)</option>
                                                        <option value="ml-IN" data-language="ml" data-country="IN">ğŸ‡®ğŸ‡³ à´•àµ‡à´°à´³à´‚ (à´®à´²à´¯à´¾à´³à´‚)</option>
                                                        <option value="ne-NP" data-language="ne" data-country="NP">ğŸ‡³ğŸ‡µ à¤¨à¥‡à¤ªà¤¾à¤² (à¤¨à¥‡à¤ªà¤¾à¤²à¥€)</option>
                                                        <option value="az-AZ" data-language="az" data-country="AZ">ğŸ‡¦ğŸ‡¿ AzÉ™rbaycan (AzÉ™rbaycan dili)</option>
                                                        <option value="ka-GE" data-language="ka" data-country="GE">ğŸ‡¬ğŸ‡ª áƒ¡áƒáƒ¥áƒáƒ áƒ—áƒ•áƒ”áƒšáƒ (áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜)</option>
                                                        <option value="sr-RS" data-language="sr" data-country="RS">ğŸ‡·ğŸ‡¸ Ğ¡Ñ€Ğ±Ğ¸Ñ˜Ğ° (Ğ¡Ñ€Ğ¿ÑĞºĞ¸)</option>
                                                        <option value="mk-MK" data-language="mk" data-country="MK">ğŸ‡²ğŸ‡° ĞœĞ°ĞºĞµĞ´Ğ¾Ğ½Ğ¸Ñ˜Ğ° (ĞœĞ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸)</option>
                                                        <option value="sl-SI" data-language="sl" data-country="SI">ğŸ‡¸ğŸ‡® Slovenija (SlovenÅ¡Äina)</option>
                                                        <option value="sk-SK" data-language="sk" data-country="SK">ğŸ‡¸ğŸ‡° Slovensko (SlovenÄina)</option>
                                                        <option value="et-EE" data-language="et" data-country="EE">ğŸ‡ªğŸ‡ª Eesti (Eesti)</option>
                                                        <option value="is-IS" data-language="is" data-country="IS">ğŸ‡®ğŸ‡¸ Ãsland (Ãslenska)</option>
                                                    </select>
                                                    <label for="summaryRegionSelect">Select Region</label>
                                                </div>
                                                <div class="input-field col s12 m4">
                                                    <button class="btn-small waves-effect waves-light" onclick="loadSummaryForDate()">
                                                        <i class="material-icons">search</i> Load Summary
                                                    </button>
                                                    <button class="btn-small waves-effect waves-light" onclick="refreshSummaryArchive()" style="margin-left: 10px;">
                                                        <i class="material-icons">refresh</i> Refresh List
                                                    </button>
                                                </div>
                                            </div>
                                            <div id="saved-summaries-list" class="saved-summaries-container">
                                                <p class="empty-state">No past summaries found.</p>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>

                        <!-- AI Disclaimer -->
                        <div class="row">
                            <div class="col s12">
                                <p style="font-style: italic; color: #9e9e9e; font-size: 0.85em; text-align: center; margin-top: 20px; margin-bottom: 0;">
                                    âš ï¸ This summary is AI-generated for informational purposes only and should not be considered as financial, legal, or professional advice.
                                </p>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <script type="module">
        import { showNotification, toggleSection, showLocationModal, closeLocationModal } from './js/uiUtils.js';
        import { acceptCookies, declineCookies, resetCookieConsent, checkCookieConsent, showCookieBanner, hideCookieBanner, clearAllPreferences, updatePreferencesDisplay } from './js/userPreferences.js';
        import { initializeGeolocation, setRegion, getCurrentRegion, handleRegionChange } from './js/geolocation.js';
        
        window.showNotification = showNotification;
        window.toggleSection = toggleSection;
        window.showLocationModal = showLocationModal;
        window.closeLocationModal = closeLocationModal;
        window.acceptCookies = acceptCookies;
        window.declineCookies = declineCookies;
        window.resetCookieConsent = resetCookieConsent;
        window.checkCookieConsent = checkCookieConsent;
        window.showCookieBanner = showCookieBanner;
        window.hideCookieBanner = hideCookieBanner;
        window.clearAllPreferences = clearAllPreferences;
        window.updatePreferencesDisplay = updatePreferencesDisplay;
        window.handleRegionChange = handleRegionChange;
        window.setRegion = setRegion;
        window.getCurrentRegion = getCurrentRegion;
    </script>
</body>
</html>
                        <div class="section-header">
                            <h4>Featured Highlights</h4>
                            <div class="section-toggle" onclick="toggleSection('news-content')" title="Show/Hide Section">
                                <span class="toggle-icon">âˆ’</span>
                            </div>
                        </div>
                        <div id="news-controls" class="row">
                            <div class="news-controls-container">
                                <div class="input-field col s6">
                                    <label for="countrySelect">Country</label>
                                    <select id="countrySelect" disabled>
                                        <option value="All">All</option>
                                        <option value="US">United States</option>
                                        <option value="CA">Canada</option>
                                        <option value="GB">United Kingdom</option>
                                        <option value="AU">Australia</option>
                                        <option value="DE">Germany</option>
                                        <option value="FR">France</option>
                                        <option value="JP">Japan</option>
                                        <option value="IN">India</option>
                                        <option value="BR">Brazil</option>
                                        <option value="KR">South Korea</option>
                                        <option value="IT">Italy</option>
                                        <option value="ES">Spain</option>
                                        <option value="MX">Mexico</option>
                                        <option value="RU">Russia</option>
                                        <option value="ZA">South Africa</option>
                                        <option value="TR">Turkey</option>
                                        <option value="NL">Netherlands</option>
                                        <option value="SE">Sweden</option>
                                        <option value="CH">Switzerland</option>
                                        <option value="SG">Singapore</option>
                                        <option value="SA">Saudi Arabia</option>
                                        <option value="AR">Argentina</option>
                                        <option value="ID">Indonesia</option>
                                        <option value="TH">Thailand</option>
                                        <option value="VN">Vietnam</option>
                                        <option value="PL">Poland</option>
                                        <option value="NO">Norway</option>
                                        <option value="FI">Finland</option>
                                        <option value="DK">Denmark</option>
                                        <option value="AT">Austria</option>
                                        <option value="BE">Belgium</option>
                                        <option value="PT">Portugal</option>
                                        <option value="IE">Ireland</option>
                                        <option value="NZ">New Zealand</option>
                                        <option value="IL">Israel</option>
                                        <option value="HK">Hong Kong</option>
                                        <option value="TW">Taiwan</option>
                                        <option value="MY">Malaysia</option>
                                        <option value="PH">Philippines</option>
                                        <option value="CL">Chile</option>
                                        <option value="CO">Colombia</option>
                                        <option value="PE">Peru</option>
                                        <option value="CZ">Czech Republic</option>
                                        <option value="HU">Hungary</option>
                                        <option value="GR">Greece</option>
                                        <option value="RO">Romania</option>
                                        <option value="UA">Ukraine</option>
                                    </select>
                                </div>
                                <div class="input-field col s6">
                                    <label for="languageSelect">Language</label>
                                    <select id="languageSelect">
                                        <option value="en">English</option>
                                        <option value="es">EspaÃ±ol</option>
                                        <option value="fr">FranÃ§ais</option>
                                        <option value="de">Deutsch</option>
                                        <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                                        <option value="zh">ä¸­æ–‡</option>
                                        <option value="jp">æ—¥æœ¬èª</option>
                                        <option value="ko">í•œêµ­ì–´</option>
                                        <option value="pt">PortuguÃªs</option>
                                        <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                                        <option value="hi">à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
                                        <option value="it">Italiano</option>
                                        <option value="nl">Nederlands</option>
                                        <option value="sv">Svenska</option>
                                        <option value="no">Norsk</option>
                                        <option value="fi">Suomi</option>
                                        <option value="da">Dansk</option>
                                        <option value="pl">Polski</option>
                                        <option value="cs">ÄŒeÅ¡tina</option>
                                        <option value="hu">Magyar</option>
                                        <option value="el">Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option>
                                        <option value="tr">TÃ¼rkÃ§e</option>
                                        <option value="th">à¹„à¸—à¸¢</option>
                                        <option value="vi">Tiáº¿ng Viá»‡t</option>
                                        <option value="id">Bahasa Indonesia</option>
                                        <option value="ms">Bahasa Melayu</option>
                                        <option value="tl">Filipino</option>
                                        <option value="sw">Kiswahili</option>
                                        <option value="af">Afrikaans</option>
                                        <option value="he">×¢×‘×¨×™×ª</option>
                                        <option value="fa">ÙØ§Ø±Ø³ÛŒ</option>
                                        <option value="bn">à¦¬à¦¾à¦‚à¦²à¦¾</option>
                                        <option value="ml">à´®à´²à´¯à´¾à´³à´‚</option>
                                        <option value="ne">à¤¨à¥‡à¤ªà¤¾à¤²à¥€</option>
                                        <option value="uk">Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°</option>
                                        <option value="az">AzÉ™rbaycan dili</option>
                                        <option value="ka">áƒ¥áƒáƒ áƒ—áƒ£áƒšáƒ˜</option>
                                        <option value="ro">RomÃ¢nÄƒ</option>
                                        <option value="sr">Ğ¡Ñ€Ğ¿ÑĞºĞ¸</option>
                                        <option value="mk">ĞœĞ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸</option>
                                        <option value="sl">SlovenÅ¡Äina</option>
                                        <option value="sk">SlovenÄina</option>
                                        <option value="et">Eesti</option>
                                        <option value="is">Ãslenska</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div id="news-content" class="section-content">
                            <div class="row">
                                <div class="col s12">
                                    <div class="news-category-group">
                                        <h6>ğŸ“° Main Categories</h6>
                                        <button id="topHeadlinesButton" class="btn-small waves-effect waves-light" onclick="handleNewsTypeClick('top-headlines')">Top Headlines</button>
                                        <button id="everythingButton" class="btn-small waves-effect waves-light" onclick="handleNewsTypeClick('everything')">Everything</button>
                                    </div>
                                    
                                    <div class="news-category-group">
                                        <h6>ğŸ’¼ Business & Finance</h6>
                                        <button id="businessNewsButton" class="btn-small waves-effect waves-light" onclick="handleButtonClick('news', 'business')">Business</button>
                                        <button id="techNewsButton" class="btn-small waves-effect waves-light" onclick="handleButtonClick('news', 'technology')">Technology</button>
                                    </div>
                                    
                                    <div class="news-category-group">
                                        <h6>ğŸ‰ Lifestyle & Events</h6>
                                        <button id="sportsNewsButton" class="btn-small waves-effect waves-light" onclick="handleButtonClick('news', 'sports')">Sports</button>
                                        <button id="healthNewsButton" class="btn-small waves-effect waves-light" onclick="handleButtonClick('news', 'health')">Health</button>
                                        <button id="entertainmentNewsButton" class="btn-small waves-effect waves-light" onclick="handleButtonClick('news', 'entertainment')">Entertainment</button>
                                        <button id="scienceNewsButton" class="btn-small waves-effect waves-light" onclick="handleButtonClick('news', 'science')">Science</button>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col s12">
                                    <div class="input-field col s12 m3">
                                        <select id="dateRangeSelect" onchange="handleDateRangeChange()" disabled>
                                            <option value="24h">Last 24 hours</option>
                                            <option value="7d">Last week</option>
                                            <option value="30d">Last month</option>
                                            <option value="all">All time</option>
                                        </select>
                                        <label>Date Range</label>
                                    </div>
                                </div>
                            </div>
                            <div style="height: 16px;"></div>
                            <div class="row">
                                <div class="col s12">
                                    <div id="news-mode-indicator" style="text-align: center; margin: 10px 0; font-size: 0.9em; color: #666;">
                                        <span id="mode-status">ğŸ“° Mode: Top Headlines</span>
                                    </div>
                                </div>
                            </div>
                            <div class="data-container"></div>
                        </div>
                    </section>
                </div>
                <div class="col s12 m6">
                    <section id="trends" class="section">
                        <div class="section-header">
                            <h4>Trending</h4>
                            <div class="section-toggle" onclick="toggleSection('trends-content')" title="Show/Hide Section">
                                <span class="toggle-icon">âˆ’</span>
                            </div>
                        </div>
                        <div id="trends-content" class="section-content">
                            <div class="trends-controls-container"></div>
                            <div class="row">
                                <div class="input-field col s6">
                                    <label for="trendsLanguageSelect">Language</label>
                                    <select id="trendsLanguageSelect">
                                        <!-- Options will be populated dynamically -->
                                    </select>
                                </div>
                                <div class="input-field col s6">
                                    <label for="trendsCountrySelect">Country</label>
                                    <select id="trendsCountrySelect">
                                        <option value="US">United States</option>
                                        <option value="CA">Canada</option>
                                        <option value="GB">United Kingdom</option>
                                        <option value="AU">Australia</option>
                                        <option value="DE">Germany</option>
                                        <option value="FR">France</option>
                                        <option value="JP">Japan</option>
                                        <option value="IN">India</option>
                                        <option value="BR">Brazil</option>
                                        <option value="KR">South Korea</option>
                                        <option value="IT">Italy</option>
                                        <option value="ES">Spain</option>
                                        <option value="MX">Mexico</option>
                                        <option value="RU">Russia</option>
                                        <option value="ZA">South Africa</option>
                                        <option value="TR">Turkey</option>
                                        <option value="NL">Netherlands</option>
                                        <option value="SE">Sweden</option>
                                        <option value="CH">Switzerland</option>
                                        <option value="SG">Singapore</option>
                                        <option value="SA">Saudi Arabia</option>
                                        <option value="AR">Argentina</option>
                                        <option value="ID">Indonesia</option>
                                        <option value="TH">Thailand</option>
                                        <option value="VN">Vietnam</option>
                                        <option value="PL">Poland</option>
                                        <option value="NO">Norway</option>
                                        <option value="FI">Finland</option>
                                        <option value="DK">Denmark</option>
                                        <option value="AT">Austria</option>
                                        <option value="BE">Belgium</option>
                                        <option value="PT">Portugal</option>
                                        <option value="IE">Ireland</option>
                                        <option value="NZ">New Zealand</option>
                                        <option value="IL">Israel</option>
                                        <option value="HK">Hong Kong</option>
                                        <option value="TW">Taiwan</option>
                                        <option value="MY">Malaysia</option>
                                        <option value="PH">Philippines</option>
                                        <option value="CL">Chile</option>
                                        <option value="CO">Colombia</option>
                                        <option value="PE">Peru</option>
                                        <option value="CZ">Czech Republic</option>
                                        <option value="HU">Hungary</option>
                                        <option value="GR">Greece</option>
                                        <option value="RO">Romania</option>
                                        <option value="UA">Ukraine</option>
                                    </select>
                                </div>
                            </div>
                            <div class="data-container"></div>
                        </div>
                    </section>
                </div>
            </div>
            
            <!-- Group 2: Finance -->
            <div class="col s12">
                <section id="finance" class="section col s12">
                    <div class="section-header" style="display: flex; align-items: center; justify-content: space-between; gap: 1rem;">
                        <h4 style="margin: 0;">Finance Data</h4>
                        <div class="time-range-buttons" style="display: flex; gap: 0.5rem;">
                            <button id="realtimeButton" class="btn-small waves-effect waves-light time-range-button" data-time-range="5m" data-interval="2m">2 Min</button>
                            <button id="hourlyButton" class="btn-small waves-effect waves-light time-range-button" data-time-range="2h" data-interval="1m">2 Hour</button>
                            <button id="openButton" class="btn-small waves-effect waves-light time-range-button" data-time-range="1d" data-interval="5m">1 Day</button>
                            <button id="weeklyButton" class="btn-small waves-effect waves-light time-range-button" data-time-range="11d" data-interval="1h">10 Day</button>
                            <button id="monthlyButton" class="btn-small waves-effect waves-light time-range-button" data-time-range="1mo" data-interval="4h">1 Month</button>
                            <button id="yearlyButton" class="btn-small waves-effect waves-light time-range-button" data-time-range="1y" data-interval="1wk">1 Year</button>
                            <button id="5yrButton" class="btn-small waves-effect waves-light time-range-button" data-time-range="5y" data-interval="1mo">5 Years</button>
                            <button id="maxButton" class="btn-small waves-effect waves-light time-range-button" data-time-range="max" data-interval="1mo">Max</button>
                        </div>
                        <div class="section-controls">
                            <button class="btn-small waves-effect waves-light" onclick="resetFinanceCardPositions()" title="Reset card positions" style="display: none;">
                                <i class="material-icons">grid_on</i> Reset Layout
                            </button>
                            <div class="section-toggle" onclick="toggleSection('finance-content')" title="Show/Hide Section">
                                <span class="toggle-icon">âˆ’</span>
                            </div>
                        </div>
                    </div>
                    <div id="finance-content" class="section-content">
                        <div class="cards-container">
                            <!-- Chart -->
                            <div class="card chart-container">
                                <div class="card-header" style="display: flex; align-items: center; justify-content: space-between;">
                                    <span class="card-title">Price Chart</span>
                                    <button id="chartFullscreenBtn" class="btn-small waves-effect waves-light" title="Fullscreen" style="margin-left: 8px;">
                                        <i class="material-icons">fullscreen</i>
                                    </button>
                                </div>
                                <div class="card-content">
                                    <div class="chart-canvas-container">
                                        <canvas id="financeChart"></canvas>
                                    </div>
                                    <input type="range" id="chartSlider" min="0" max="100" value="0" class="chart-slider">
                                    <div class="chart-controls">
                                        <button class="btn waves-effect waves-light" onclick="togglePauseFinance()">Pause</button>
                                        <button class="btn-small waves-effect waves-light" onclick="resetChartZoom()">Reset Zoom</button>
                                    </div>
                                </div>
                            </div>

                            <!-- Live Stock Dashboard -->
                            <div class="card stock-dashboard">
                                <div class="card-header">
                                    <span class="card-title">Live Stock Dashboard</span>
                                    <button id="dashboardToggle" class="btn-small waves-effect waves-light green" onclick="toggleStockDashboard()" title="Pause/Resume dashboard updates">Pause</button>
                                </div>
                                <div class="card-content">
                                    <div id="stock-dashboard" class="stock-dashboard">
                                        <!-- Dynamic stock cards will be populated here -->
                                    </div>
                                </div>
                            </div>

                            <!-- Watchlist -->
                            <div class="card watchlist">
                                <div class="card-header">
                                    <span class="card-title">Watchlist</span>
                                    <button class="btn-small waves-effect waves-light" onclick="resetToDefaultWatchlist()" title="Reset to default watchlist">Reset to Default</button>
                                </div>
                                <div id="watchlist-container" class="watchlist-container">
                                    <!-- Watchlist items will be populated here -->
                                </div>
                                <!-- Stock Search -->
                                <div class="card stock-info">
                                    <div class="card-header">
                                        <span class="card-title">Stock Search</span>
                                    </div>
                                    <div class="card-content">
                                        <div class="input-field">
                                            <input type="text" id="stockSymbolInput" placeholder="Enter stock symbol or company name" autocomplete="off">
                                            <div id="autocomplete-list" class="autocomplete-items"></div>
                                        </div>
                                        <div id="stock-info-card-container"></div>
                                        <div class="quick-actions">
                                            <button class="btn-small waves-effect waves-light" onclick="searchAndAddStock()">Search</button>
                                            <button class="btn-small waves-effect waves-light" onclick="clearWatchlist()">Clear Watchlist</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="data-container"></div>
                    </div>
                </section>
            </div>
            
            <!-- Group 3: Traffic and Reddit -->
            <div class="col s12">
                <section id="traffic" class="section">
                    <div class="section-header">
                        <h4>Google Maps Traffic</h4>
                        <div class="section-toggle" onclick="toggleSection('traffic-content')" title="Show/Hide Section">
                            <span class="toggle-icon">âˆ’</span>
                        </div>
                    </div>
                    <div id="traffic-content" class="section-content">
                        <form id="directions-form" style="margin-bottom: 1em; display: flex; flex-wrap: wrap; gap: 8px; align-items: center;">
                            <input id="origin-input" class="controls" type="text" placeholder="Enter origin" style="flex: 1; min-width: 180px;" required>
                            <input id="destination-input" class="controls" type="text" placeholder="Enter destination" style="flex: 1; min-width: 180px;" required>
                            <select id="travel-mode" class="controls" style="min-width: 120px;">
                                <option value="DRIVING">Driving</option>
                                <option value="WALKING">Walking</option>
                                <option value="BICYCLING">Bicycling</option>
                                <option value="TRANSIT">Transit</option>
                            </select>
                            <button type="submit" class="btn waves-effect waves-light">Get Directions</button>
                        </form>
                        <div id="map" style="height: 400px; width: 100%;"></div>
                        <div id="directions-panel" style="margin-top: 1em; background: #fafafa; padding: 1em; border-radius: 8px; min-height: 60px;"></div>
                    </div>
                </section>
            </div>
            <div class="col s12">
                <section id="reddit" class="section">
                    <div class="section-header">
                        <h4>Reddit Top Posts</h4>
                        <div class="section-toggle" onclick="toggleSection('reddit-content')" title="Show/Hide Section">
                            <span class="toggle-icon">âˆ’</span>
                        </div>
                    </div>
                    <div id="reddit-content" class="section-content">
                        <div class="row">
                            <div class="col s12">
                                <button id="dayRedditButton" class="btn waves-effect waves-light" onclick="handleButtonClick('reddit', 'day')">Top Posts Today</button>
                                <button id="weekRedditButton" class="btn waves-effect waves-light" onclick="handleButtonClick('reddit', 'week')">Top Posts This Week</button>
                            </div>
                        </div>
                        <div class="data-container"></div>
                    </div>
                </section>
            </div>
            
            <!-- Group 4: Chat -->
            <div class="col s12">
                <section id="chat" class="section">
                    <div class="section-header">
                        <h4>Chat</h4>
                    </div>
                    <div id="chat-content" class="section-content">
                        <div class="chat-container">
                            <label>Select Model</label>
                            <div class="input-field">
                                <select id="model-select">
                                    <option value="deepseek/deepseek-r1:free">DeepSeek (Accurate) [10-60s response time]</option>
                                    <option value="deepseek/deepseek-chat-v3-0324:free">deepseek-chat-v3-0324</option>
                                </select>
                            </div>
                            <div id="chat-log" class="data-container"></div>
                            <div class="chat-input-container">
                                <input type="text" id="chat-input" placeholder="Type your message..." autocomplete="off">
                                <button id="send-button" class="btn waves-effect waves-light">Send</button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- User Preferences Section -->
        <div class="row">
            <div class="col s12">
                <section id="preferences" class="section">
                    <div class="section-header">
                        <h4>âš™ï¸ User Preferences</h4>
                        <div class="section-toggle" onclick="toggleSection('preferences-content')" title="Show/Hide Section">
                            <span class="toggle-icon">âˆ’</span>
                        </div>
                    </div>
                    <div id="preferences-content" class="section-content">
                        <div class="row">
                            <div class="col s12 m6">
                                <div class="preference-group">
                                    <div id="preferences-weather" style="margin-top:10px;"></div>
                                </div>
                            </div>
                            
                            <div class="col s12 m6">
                                <div class="preference-group">
                                    <h5>ğŸ“° News & Trends</h5>
                                    <p><strong>Current Settings:</strong></p>
                                    <p>Country: <span id="currentNewsCountry">US</span></p>
                                    <p>Language: <span id="currentNewsLanguage">English</span></p>
                                    <p class="preference-info">These settings are automatically saved when you change them in the News section.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col s12 m6">
                                <div class="preference-group">
                                    <h5>ğŸ“Š Finance Watchlist</h5>
                                    <p><strong>Current Watchlist:</strong></p>
                                    <div id="preferencesWatchlist" class="watchlist-display">
                                        <p>No stocks in watchlist</p>
                                    </div>
                                    <p class="preference-info">Your watchlist is automatically saved when you add or remove stocks.</p>
                                </div>
                            </div>
                                
                            <div class="col s12 m6">
                                <div class="preference-group">
                                    <h5>ğŸ¨ Theme</h5>
                                    <p><strong>Current Theme:</strong> <span id="currentTheme">Light</span></p>
                                    <button class="btn waves-effect waves-light" onclick="toggleTheme()">Toggle Theme</button>
                                    <p class="preference-info">Your theme preference is automatically saved.</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col s12">
                                <div class="preference-group">
                                    <h5>Data Management</h5>
                                    <button class="btn waves-effect waves-light red" onclick="clearAllPreferences()">Reset All Settings</button>
                                    <button class="btn-small waves-effect waves-light" onclick="resetCookieConsent()" style="margin-left: 10px;">ğŸª Reset Cookies</button>
                                    <p class="preference-info">This will clear all your saved preferences including location, watchlist, theme, and other settings. This action cannot be undone.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>
    
    <!-- Cookie/Privacy Notification Banner -->
    <div id="cookie-notification" class="cookie-banner" style="display: none;">
        <div class="cookie-content">
            <div class="cookie-text">
                <h6>Privacy & Cookie Usage</h6>
                <p>This website uses cookies to remember your preferences (location, watchlist, theme, etc.) and improve your experience. No personal data is collected or shared with third parties. By continuing to use this site, you consent to our use of cookies for these purposes.</p>
            </div>
            <div class="cookie-actions">
                <button class="btn-small waves-effect waves-light" onclick="acceptCookies()">Accept</button>
                <button class="btn-small waves-effect waves-light grey" onclick="declineCookies()">Decline</button>
                <a href="privacy-policy.html" target="_blank" class="btn-small waves-effect waves-light blue">Privacy Policy</a>
            </div>
        </div>
    </div>
    
    <footer class="container center-align">
        <div class="footer-content">
            <p>&copy; 2025 InfoDash. All rights reserved.</p>
            <div class="footer-links">
                <a href="terms-of-service.html" target="_blank" class="footer-link">Terms of Service</a>
                <span class="footer-separator">â€¢</span>
                <a href="privacy-policy.html" target="_blank" class="footer-link">Privacy Policy</a>
            </div>
            <p class="footer-disclaimer">The content provided on this website is for informational purposes only and does not constitute financial, investment, legal, or other professional advice. While we strive to provide accurate and up-to-date information, we make no guarantees about the completeness, reliability, or suitability of the content for any specific purpose.</p>
        </div>
    </footer>
    <script type="module">
        import { showNotification, toggleSection, showLocationModal, closeLocationModal } from './js/uiUtils.js';
        import { acceptCookies, declineCookies, resetCookieConsent, checkCookieConsent, showCookieBanner, hideCookieBanner, clearAllPreferences, updatePreferencesDisplay } from './js/userPreferences.js';
        import { initializeGeolocation, setRegion, getCurrentRegion, handleRegionChange } from './js/geolocation.js';
        
        window.showNotification = showNotification;
        window.toggleSection = toggleSection;
        window.showLocationModal = showLocationModal;
        window.closeLocationModal = closeLocationModal;
        window.acceptCookies = acceptCookies;
        window.declineCookies = declineCookies;
        window.resetCookieConsent = resetCookieConsent;
        window.checkCookieConsent = checkCookieConsent;
        window.showCookieBanner = showCookieBanner;
        window.hideCookieBanner = hideCookieBanner;
        window.clearAllPreferences = clearAllPreferences;
        window.updatePreferencesDisplay = updatePreferencesDisplay;
        window.handleRegionChange = handleRegionChange;
        window.setRegion = setRegion;
        window.getCurrentRegion = getCurrentRegion;
        // Remove all inline definitions of these functions
    </script>
    <button id="scrollToTopBtn" class="scroll-to-top">â†‘</button>

    <!-- Notification Bar -->
    <div id="notification-bar"></div>

    <script type="module">
        // Add fullscreen logic for chart
        function isMobileDevice() {
            return /Mobi|Android|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i.test(navigator.userAgent);
        }
        const chartFullscreenBtn = document.getElementById('chartFullscreenBtn');
        if (chartFullscreenBtn) {
            chartFullscreenBtn.addEventListener('click', async function () {
                const chartContainer = document.querySelector('.card.chart-container');
                if (!chartContainer) return;
                // Request fullscreen
                if (chartContainer.requestFullscreen) {
                    await chartContainer.requestFullscreen();
                } else if (chartContainer.webkitRequestFullscreen) {
                    await chartContainer.webkitRequestFullscreen();
                }
                // Try to lock orientation to landscape (must be in this gesture)
                if (isMobileDevice() && screen.orientation && screen.orientation.lock) {
                    try {
                        await screen.orientation.lock('landscape');
                    } catch (e) {
                        if (window.showNotification) {
                            window.showNotification('For best experience, rotate your device to landscape.', 4000);
                        } else {
                            alert('For best experience, rotate your device to landscape.');
                        }
                    }
                }
            });
        }
        document.addEventListener('fullscreenchange', function () {
            if (!document.fullscreenElement && isMobileDevice() && screen.orientation && screen.orientation.unlock) {
                try {
                    screen.orientation.unlock();
                } catch (e) {}
            }
        });
    </script>

<!-- Google Maps JS API (secure, via server proxy) -->
<script>
    // Ensure initMap is available globally before Google Maps loads
    window.initMap = function() {
        console.warn('initMap called before map.js loaded, will retry...');
        // Retry after a short delay to allow map.js to load
        setTimeout(() => {
            if (typeof window.initMapReal === 'function') {
                window.initMapReal();
            } else {
                console.error('initMapReal function not available after retry');
            }
        }, 500);
    };
</script>
<script src="/api/googlemaps/script"></script>
<script src="js/map.js"></script>
</body>
</html>
