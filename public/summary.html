<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">   
    <!-- Primary Meta Tags -->
    <title>InfoDash - Summary Dashboard</title>
    <meta name="title" content="InfoDash - Summary Dashboard">
    <meta name="description" content="Your all-in-one dashboard for daily summaries, market trends, weather, and news updates.">
    
    <!-- Fonts and Stylesheets -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans+Text:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <!-- Font Awesome for icons (deferred) -->
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/solid.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/fontawesome.min.css">
    </noscript>
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <script>
        // Global functions for onclick handlers
        window.toggleSidebar = function() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('main-content');
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('expanded');
        };
    </script>
    
    <!-- Application Scripts -->
    <script type="module" src="js/userPreferences.js"></script>
    <script type="module" src="js/app.js"></script>
    <script type="module" src="js/summary.js"></script>
    <script type="module" src="js/weather.js"></script>
    <script type="module" src="js/chat.js"></script>

    <!--
    Prevent theme flicker by applying the theme class to <html> immediately, before <body> is parsed.
    This ensures the correct theme is set before any content is rendered.
    This script is placed as the very first element in <head> to run before any paint.
    -->
    <script>
    // Helper to get cookie value
    function getCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) {
                return decodeURIComponent(c.substring(nameEQ.length, c.length));
            }
        }
        return null;
    }

    // Try to get theme from cookie, fallback to light
    let savedTheme = 'light';
    let cookieRaw = null;
    try {
        cookieRaw = getCookie('infoDash_preferences');
        if (cookieRaw) {
            const parsed = JSON.parse(cookieRaw);
            if (parsed && parsed.theme) savedTheme = parsed.theme;
        }
    } catch (e) {
        // fallback to light
    }

    // Remove any previous theme classes from <html>
    document.documentElement.classList.remove('light-theme', 'dark-theme');
    // Apply theme class to <html> immediately
    document.documentElement.classList.add(savedTheme + '-theme');

    // Set background and color directly on <html> to prevent flash
    if (savedTheme === 'dark') {
        document.documentElement.style.background = '#181a1b';
        document.documentElement.style.color = '#eee';
    } else {
        document.documentElement.style.background = '#f7f8fa';
        document.documentElement.style.color = '#222';
    }

    // Preemptively set <body> class and style as soon as possible
    function applyBodyTheme() {
        if (!document.body) return;
        document.body.classList.remove('light-theme', 'dark-theme');
        document.body.classList.add(savedTheme + '-theme');
        // Remove inline background/color to let CSS take over after initial paint
        document.body.style.background = '';
        document.body.style.color = '';
        // Remove inline styles from <html> so CSS rules can apply
        document.documentElement.style.background = '';
        document.documentElement.style.color = '';
        // Force a reflow to ensure CSS rules are applied immediately
        void document.body.offsetWidth;
    }

    // If body is already available, apply theme class right away
    if (document.body) {
        applyBodyTheme();
    } else {
        // Otherwise, apply as soon as DOM is interactive (before images/styles load)
        document.addEventListener('DOMContentLoaded', function() {
            applyBodyTheme();
        }, { once: true });

        // Also try to catch body as soon as it appears (for even less flicker)
        const observer = new MutationObserver(function() {
            if (document.body) {
                applyBodyTheme();
                observer.disconnect();
            }
        });
        observer.observe(document.documentElement, { childList: true, subtree: true });
    }
    </script>
</head>

<body>
        <!-- Sidebar Navigation -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <button class="sidebar-toggle" onclick="toggleSidebar()">
                    <i class="fas fa-bars"></i>
                </button>
                <!-- Nav for mobile: placed between toggle and title, hidden on desktop via CSS -->
                <nav class="sidebar-nav mobile-nav" id="mobile-nav">
                    <ul class="nav-menu">
                        <li class="nav-item">
                            <a href="summary.html" class="nav-link active">
                                <i class="fas fa-regular fa-clipboard"></i>
                                <span>Summary</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="finance.html" class="nav-link">
                                <i class="fas fa-chart-line"></i>
                                <span>Stocks</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="news.html" class="nav-link">
                                <i class="fas fa-newspaper"></i>
                                <span>News</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="map.html" class="nav-link">
                                <i class="fas fa-map"></i>
                                <span>Traffic</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="blog.html" class="nav-link">
                                <i class="fas fa-solid fa-blog"></i>
                                <span>Blog</span>
                            </a>
                        </li>
                    </ul>
                </nav>
                <i class="fas fa-rocket" style="color: #f44336;"></i>
                <div class="sidebar-title" id="sidebar-title">
                    <span>InfoDash</span>
                </div>
            </div>
            
            <!-- Nav for desktop: hidden on mobile via CSS -->
            <nav class="sidebar-nav" id="desktop-nav">
                <ul class="nav-menu">                    
                    <li class="nav-item">
                        <a href="news.html" class="nav-link">
                            <i class="fas fa-newspaper"></i>
                            <span>News</span>
                        </a>
                    </li>                    
                    <li class="nav-item">
                        <a href="finance.html" class="nav-link">
                            <i class="fas fa-chart-line"></i>
                            <span>Stocks</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="summary.html" class="nav-link active">
                            <i class="fas fa-regular fa-clipboard"></i>
                            <span>Summary</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="map.html" class="nav-link">
                            <i class="fas fa-map"></i>
                            <span>Traffic</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="blog.html" class="nav-link">
                            <i class="fas fa-solid fa-blog"></i>
                            <span>Blog</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-details">
                        <div class="user-name">Guest User</div>
                    </div>
                </div>
            </div>  
        </div>
        
        <!-- Main Content Area -->
        <main class="main-content" id="main-content">
            <!-- Top Header -->
            <header class="top-header">
                <div class="header-left">
                    <h4 class="page-title">Summary</h4>
                </div>
                <div class="header-right">
                    <!-- Weather Display -->
                    <div id="header-weather" class="weather-display" style="display: flex; align-items: center; gap: 8px; padding: 8px 12px; background: var(--card-bg); border-radius: 6px; border: 1px solid var(--border-color); min-width: 120px; justify-content: center;" onclick="handleWeatherClick()" title="Click to change location">
                        <span id="weather-icon" style="font-size: 1.2em;">🌤️</span>
                            <span id="weather-temp" style="font-weight: 600; font-size: 0.9em;">--°F</span>
                            <span id="weather-location" style="font-size: 0.7em; color: var(--text-secondary);">Loading...</span>
                    </div>
                    <div class="language-selector">
                        <select id="regionSelect" onchange="handleRegionChange()">
                            <option value="en-US" data-language="en" data-country="US">🇺🇸 United States (English)</option>
                            <option value="en-GB" data-language="en" data-country="GB">🇬🇧 United Kingdom (English)</option>
                            <option value="en-CA" data-language="en" data-country="CA">🇨🇦 Canada (English)</option>
                            <option value="en-AU" data-language="en" data-country="AU">🇦🇺 Australia (English)</option>
                            <option value="es-ES" data-language="es" data-country="ES">🇪🇸 España (Español)</option>
                            <option value="es-MX" data-language="es" data-country="MX">🇲🇽 México (Español)</option>
                            <option value="fr-FR" data-language="fr" data-country="FR">🇫🇷 France (Français)</option>
                            <option value="de-DE" data-language="de" data-country="DE">🇩🇪 Deutschland (Deutsch)</option>
                            <option value="pt-BR" data-language="pt" data-country="BR">🇧🇷 Brasil (Português)</option>
                            <option value="it-IT" data-language="it" data-country="IT">🇮🇹 Italia (Italiano)</option>
                            <option value="ru-RU" data-language="ru" data-country="RU">🇷🇺 Россия (Русский)</option>
                            <option value="jp-JP" data-language="jp" data-country="JP">🇯🇵 日本 (日本語)</option>
                            <option value="ko-KR" data-language="ko" data-country="KR">🇰🇷 한국 (한국어)</option>
                            <option value="zh-CN" data-language="zh" data-country="CN">🇨🇳 中国 (中文)</option>
                            <option value="ar-SA" data-language="ar" data-country="SA">🇸🇦 السعودية (العربية)</option>
                            <option value="hi-IN" data-language="hi" data-country="IN">🇮🇳 भारत (हिन्दी)</option>
                            <option value="vi-VN" data-language="vi" data-country="VN">🇻🇳 Việt Nam (Tiếng Việt)</option>
                            <option value="th-TH" data-language="th" data-country="TH">🇹🇭 ไทย (ไทย)</option>
                            <option value="id-ID" data-language="id" data-country="ID">🇮🇩 Indonesia (Bahasa Indonesia)</option>
                            <option value="tr-TR" data-language="tr" data-country="TR">🇹🇷 Türkiye (Türkçe)</option>
                            <option value="pl-PL" data-language="pl" data-country="PL">🇵🇱 Polska (Polski)</option>
                            <option value="nl-NL" data-language="nl" data-country="NL">🇳🇱 Nederland (Nederlands)</option>
                            <option value="sv-SE" data-language="sv" data-country="SE">🇸🇪 Sverige (Svenska)</option>
                            <option value="no-NO" data-language="no" data-country="NO">🇳🇴 Norge (Norsk)</option>
                            <option value="fi-FI" data-language="fi" data-country="FI">🇫🇮 Suomi (Suomi)</option>
                            <option value="da-DK" data-language="da" data-country="DK">🇩🇰 Danmark (Dansk)</option>
                            <option value="cs-CZ" data-language="cs" data-country="CZ">🇨🇿 Česko (Čeština)</option>
                            <option value="hu-HU" data-language="hu" data-country="HU">🇭🇺 Magyarország (Magyar)</option>
                            <option value="el-GR" data-language="el" data-country="GR">🇬🇷 Ελλάδα (Ελληνικά)</option>
                            <option value="ro-RO" data-language="ro" data-country="RO">🇷🇴 România (Română)</option>
                            <option value="uk-UA" data-language="uk" data-country="UA">🇺🇦 Україна (Українська)</option>
                            <option value="he-IL" data-language="he" data-country="IL">🇮🇱 ישראל (עברית)</option>
                            <option value="fa-IR" data-language="fa" data-country="IR">🇮🇷 ایران (فارسی)</option>
                            <option value="bn-BD" data-language="bn" data-country="BD">🇧🇩 বাংলাদেশ (বাংলা)</option>
                            <option value="ml-IN" data-language="ml" data-country="IN">🇮🇳 കേരളം (മലയാളം)</option>
                            <option value="ne-NP" data-language="ne" data-country="NP">🇳🇵 नेपाल (नेपाली)</option>
                            <option value="az-AZ" data-language="az" data-country="AZ">🇦🇿 Azərbaycan (Azərbaycan dili)</option>
                            <option value="ka-GE" data-language="ka" data-country="GE">🇬🇪 საქართველო (ქართული)</option>
                            <option value="sr-RS" data-language="sr" data-country="RS">🇷🇸 Србија (Српски)</option>
                            <option value="mk-MK" data-language="mk" data-country="MK">🇲🇰 Македонија (Македонски)</option>
                            <option value="sl-SI" data-language="sl" data-country="SI">🇸🇮 Slovenija (Slovenščina)</option>
                            <option value="sk-SK" data-language="sk" data-country="SK">🇸🇰 Slovensko (Slovenčina)</option>
                            <option value="et-EE" data-language="et" data-country="EE">🇪🇪 Eesti (Eesti)</option>
                            <option value="is-IS" data-language="is" data-country="IS">🇮🇸 Ísland (Íslenska)</option>
                        </select>
                    </div>
                    <button class="theme-toggle" id="themeToggle" title="Toggle light/dark mode">🌓</button>
                </div>
            </header>
        <div class="summary-container" >
            <!-- Unified Summary Section -->
            <div class="row">
                <div class="col s12">
                    <div id="summary-content" class="card sumary-content">
                        <div class="card-header">
                            <h4>
                                <i class="fas fa-solid fa-calendar-days"></i>
                                Summary Date: 
                                <span id="titleDate"></span>
                            </h4>
                            <div class="right">
                                <div class="section-controls">
                                    <button id="summary-refresh-btn" class="btn-small waves-effect waves-light" onclick="refreshSummary()">🔄 Refresh</button>
                                </div>
                            </div>
                            <div class="section-toggle" onclick="toggleSection('summary-content-container')" title="Show/Hide Section">
                                <span class="toggle-icon">−</span>
                            </div>
                        </div>

                        <div id="summary-content-container" class="section-content">
                            <!-- Summary Display -->
                            <div class="summary-loading">
                                <div class="progress">
                                    <div class="indeterminate"></div>
                                </div>
                                <p class="center-align" id="summary-loading-text">Loading today's summary...</p>
                            </div>
                            <div class="summary-content" style="display: none;">
                                <!-- Summary cards will be here -->
                                <div class="row">
                                    <div class="col s12 m4">
                                        <div class="summary-card news-summary">
                                            <h5 style="margin-top: 5px;">📰 Top Headlines</h5>
                                            <div class="summary-text"></div>
                                        </div>
                                    </div>
                                    <div class="col s12 m4">
                                        <div class="summary-card trends-summary">
                                            <h5 style="margin-top: 5px;">🔥 Trending Topics</h5>
                                            <div class="summary-text"></div>
                                        </div>
                                    </div>
                                    <div class="col s12 m4">
                                        <div class="summary-card finance-summary">
                                            <h5 style="margin-top: 5px;">📈 Market Overview</h5>
                                            <div class="summary-text"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col s12 m6">
                                        <div class="summary-card overall-summary">
                                            <h5 style="margin-top: 5px;">🧞 Info Genie</h5>
                                            <div class="summary-text"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Archive List  -->
                            <div class="row">
                                <div class="col s12 m12">
                                    <div class="summary-card archive-card">
                                        <div class="card-header collapsible-header">
                                            <i class="material-icons">archive</i>Summary Archive
                                        </div>
                                        <div class="card-content card-controls">
                                            <div class="input-field col s12 m4">
                                                <input type="date" id="summaryDate" onchange="loadSummaryForDate()">
                                                <label for="summaryDate" class="active">Select Date</label>
                                            </div>
                                            <div class="input-field col s12 m4">
                                                <select id="summaryRegionSelect" onchange="loadSummaryForDate()">
                                                    <option value="en-US" data-language="en" data-country="US">🇺🇸 United States (English)</option>
                                                    <option value="en-GB" data-language="en" data-country="GB">🇬🇧 United Kingdom (English)</option>
                                                    <option value="en-CA" data-language="en" data-country="CA">🇨🇦 Canada (English)</option>
                                                    <option value="en-AU" data-language="en" data-country="AU">🇦🇺 Australia (English)</option>
                                                    <option value="es-ES" data-language="es" data-country="ES">🇪🇸 España (Español)</option>
                                                    <option value="es-MX" data-language="es" data-country="MX">🇲🇽 México (Español)</option>
                                                    <option value="fr-FR" data-language="fr" data-country="FR">🇫🇷 France (Français)</option>
                                                    <option value="de-DE" data-language="de" data-country="DE">🇩🇪 Deutschland (Deutsch)</option>
                                                    <option value="pt-BR" data-language="pt" data-country="BR">🇧🇷 Brasil (Português)</option>
                                                    <option value="it-IT" data-language="it" data-country="IT">🇮🇹 Italia (Italiano)</option>
                                                    <option value="ru-RU" data-language="ru" data-country="RU">🇷🇺 Россия (Русский)</option>
                                                    <option value="jp-JP" data-language="jp" data-country="JP">🇯�� 日本 (日本語)</option>
                                                    <option value="ko-KR" data-language="ko" data-country="KR">🇰🇷 한국 (한국어)</option>
                                                    <option value="zh-CN" data-language="zh" data-country="CN">🇨🇳 中国 (中文)</option>
                                                    <option value="ar-SA" data-language="ar" data-country="SA">🇸🇦 السعودية (العربية)</option>
                                                    <option value="hi-IN" data-language="hi" data-country="IN">🇮🇳 भारत (हिन्दी)</option>
                                                    <option value="vi-VN" data-language="vi" data-country="VN">🇻🇳 Việt Nam (Tiếng Việt)</option>
                                                    <option value="th-TH" data-language="th" data-country="TH">🇹🇭 ไทย (ไทย)</option>
                                                    <option value="id-ID" data-language="id" data-country="ID">🇮🇩 Indonesia (Bahasa Indonesia)</option>
                                                    <option value="tr-TR" data-language="tr" data-country="TR">🇹🇷 Türkiye (Türkçe)</option>
                                                    <option value="pl-PL" data-language="pl" data-country="PL">🇵🇱 Polska (Polski)</option>
                                                    <option value="nl-NL" data-language="nl" data-country="NL">🇳🇱 Nederland (Nederlands)</option>
                                                    <option value="sv-SE" data-language="sv" data-country="SE">🇸🇪 Sverige (Svenska)</option>
                                                    <option value="no-NO" data-language="no" data-country="NO">🇳🇴 Norge (Norsk)</option>
                                                    <option value="fi-FI" data-language="fi" data-country="FI">🇫🇮 Suomi (Suomi)</option>
                                                    <option value="da-DK" data-language="da" data-country="DK">🇩🇰 Danmark (Dansk)</option>
                                                    <option value="cs-CZ" data-language="cs" data-country="CZ">🇨🇿 Česko (Čeština)</option>
                                                    <option value="hu-HU" data-language="hu" data-country="HU">🇭🇺 Magyarország (Magyar)</option>
                                                    <option value="el-GR" data-language="el" data-country="GR">🇬🇷 Ελλάδα (Ελληνικά)</option>
                                                    <option value="ro-RO" data-language="ro" data-country="RO">🇷🇴 România (Română)</option>
                                                    <option value="uk-UA" data-language="uk" data-country="UA">🇺🇦 Україна (Українська)</option>
                                                    <option value="he-IL" data-language="he" data-country="IL">🇮🇱 ישראל (עברית)</option>
                                                    <option value="fa-IR" data-language="fa" data-country="IR">🇮🇷 ایران (فارسی)</option>
                                                    <option value="bn-BD" data-language="bn" data-country="BD">🇧🇩 বাংলাদেশ (বাংলা)</option>
                                                    <option value="ml-IN" data-language="ml" data-country="IN">🇮🇳 കേരളം (മലയാളം)</option>
                                                    <option value="ne-NP" data-language="ne" data-country="NP">🇳🇵 नेपाल (नेपाली)</option>
                                                    <option value="az-AZ" data-language="az" data-country="AZ">🇦🇿 Azərbaycan (Azərbaycan dili)</option>
                                                    <option value="ka-GE" data-language="ka" data-country="GE">🇬🇪 საქართველო (ქართული)</option>
                                                    <option value="sr-RS" data-language="sr" data-country="RS">🇷🇸 Србија (Српски)</option>
                                                    <option value="mk-MK" data-language="mk" data-country="MK">🇲🇰 Македонија (Македонски)</option>
                                                    <option value="sl-SI" data-language="sl" data-country="SI">🇸🇮 Slovenija (Slovenščina)</option>
                                                    <option value="sk-SK" data-language="sk" data-country="SK">🇸🇰 Slovensko (Slovenčina)</option>
                                                    <option value="et-EE" data-language="et" data-country="EE">🇪🇪 Eesti (Eesti)</option>
                                                    <option value="is-IS" data-language="is" data-country="IS">🇮🇸 Ísland (Íslenska)</option>
                                                </select>
                                                Select Region
                                            </div>
                                            <div class="input-field col s12 m4">
                                                <button class="btn-small waves-effect waves-light" onclick="loadSummaryForDate()">
                                                    <i class="material-icons">search</i> Load Summary
                                                </button>
                                                <button class="btn-small waves-effect waves-light" onclick="refreshSummaryArchive()" style="margin-left: 10px;">
                                                    <i class="material-icons">refresh</i> Refresh List
                                                </button>
                                            </div>
                                        </div>
                                        
                                        <div id="saved-summaries-list" class="saved-summaries-container">
                                            <p class="empty-state">No past summaries found.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- AI Disclaimer -->
                            <div class="row">
                                <div class="col s12">
                                    <p style="font-style: italic; color: #9e9e9e; font-size: 0.85em; text-align: center; margin-top: 20px; margin-bottom: 0;">
                                        ⚠️ This summary is AI-generated for informational purposes only and should not be considered as financial, legal, or professional advice.
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                    </div>
                </div>
                <div class="row">
                    <div class="col s12">
                        <div class="card weather-summary">
                            <div class="card-header" style="display: flex; align-items: center;">
                                <h5 style="flex: 1 1 auto; margin: 0;">🌤️ Weather Update</h5>
                                <button onclick="showLocationModal()" class="btn-small waves-effect waves-light" style="margin-left: 10px; font-size: 0.8em;">📍 Set Location</button>
                                <button onclick="updateHeaderWeather(); updateSummaryWeather();" class="btn-small waves-effect waves-light" style="margin-left: 10px; font-size: 0.8em;">🔄 Update Weather</button>
                            </div>
                            <div class="weather-info">
                                <div class="weather-location"></div>
                                <div class="weather-updated"></div>
                                <p class="weather-condition"></p>
                                <p class="weather-temp"></p>
                                <p class="weather-feelslike"></p>
                                <p class="weather-humidity"></p>
                                <p class="weather-wind"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Chat -->
            <div class="col s12">
                <section id="chat" class="section">
                    <div class="section-header">
                        <h4>Lookup Chat</h4>
                    </div>
                    <div id="chat-content" class="section-content">
                        <div class="chat-container">
                            <label>Select Model</label>
                            <div class="input-field">
                                <select id="model-select">
                                    <option value="deepseek/deepseek-r1:free">DeepSeek (Accurate) [10-60s response time]</option>
                                    <option value="deepseek/deepseek-chat-v3-0324:free">deepseek-chat-v3-0324</option>
                                </select>
                            </div>
                        </div>
                        <div id="chat-log" class="data-container"></div>
                        <div class="chat-input-container">
                            <input type="text" id="chat-input" placeholder="Type your message..." autocomplete="off">
                            <button id="send-button" class="btn waves-effect waves-light">Send</button>
                        </div>
                    </div>
                    <!-- Simple Queries -->
                    <div class="row">
                        <div class="col s12">
                            <p style="font-style: italic; color: #9e9e9e; font-size: 0.85em; text-align: left; margin-top: 20px; margin-bottom: 0;">
                                Simple queries default to using DuckDuckGo Instant Answer API.
                            </p>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <!-- Cookie/Privacy Notification Banner -->
        <div id="cookie-notification" class="cookie-banner" style="display: none;">
            <div class="cookie-content">
                <div class="cookie-text">
                    <h6>Privacy & Cookie Usage</h6>
                    <p>This website uses cookies to remember your preferences (location, watchlist, theme, etc.) and improve your experience. No personal data is collected or shared with third parties. By continuing to use this site, you consent to our use of cookies for these purposes.</p>
                </div>
                <div class="cookie-actions">
                    <button class="btn-small waves-effect waves-light" onclick="acceptCookies()">Accept</button>
                    <button class="btn-small waves-effect waves-light grey" onclick="declineCookies()">Decline</button>
                    <a href="privacy-policy.html" target="_blank" class="btn-small waves-effect waves-light blue">Privacy Policy</a>
                </div>
            </div>
        </div>
        
        <footer class="container center-align">
            <div class="footer-content">
                <p>&copy; 2025 InfoDash. All rights reserved.</p>
                <div class="footer-links">
                    <a href="terms-of-service.html" target="_blank" class="footer-link">Terms of Service</a>
                    <span class="footer-separator">•</span>
                    <a href="privacy-policy.html" target="_blank" class="footer-link">Privacy Policy</a>
                </div>
                <p class="footer-disclaimer">The content provided on this website is for informational purposes only and does not constitute financial, investment, legal, or other professional advice. While we strive to provide accurate and up-to-date information, we make no guarantees about the completeness, reliability, or suitability of the content for any specific purpose.</p>
            </div>
        </footer>
        <button id="scrollToTopBtn" class="scroll-to-top">↑</button>

        <!-- Notification Bar -->
        <div id="notification-bar"></div>

        <script type="module">
            import { showNotification, toggleSection, showLocationModal, closeLocationModal } from './js/uiUtils.js';
            import { acceptCookies, declineCookies, resetCookieConsent, checkCookieConsent, showCookieBanner, hideCookieBanner, clearAllPreferences, updatePreferencesDisplay } from './js/userPreferences.js';
            import { initializeGeolocation, setRegion, getCurrentRegion, handleRegionChange } from './js/geolocation.js';
            
            window.showNotification = showNotification;
            window.toggleSection = toggleSection;
            window.showLocationModal = showLocationModal;
            window.closeLocationModal = closeLocationModal;
            window.acceptCookies = acceptCookies;
            window.declineCookies = declineCookies;
            window.resetCookieConsent = resetCookieConsent;
            window.checkCookieConsent = checkCookieConsent;
            window.showCookieBanner = showCookieBanner;
            window.hideCookieBanner = hideCookieBanner;
            window.clearAllPreferences = clearAllPreferences;
            window.updatePreferencesDisplay = updatePreferencesDisplay;
            window.handleRegionChange = handleRegionChange;
            window.setRegion = setRegion;
            window.getCurrentRegion = getCurrentRegion;
            // Remove all inline definitions of these functions
        </script>
    </body>



</html>
